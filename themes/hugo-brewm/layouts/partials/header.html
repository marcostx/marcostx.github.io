{{ "<!-- header.html -->" | safeHTML }}
<header class="pagewidth">
    <div id="background-header" class="background" aria-hidden="true">
        <div class="grain" hidden></div>
    </div>
    {{/*

        skipper/bypass block [KB] */}}
    <nav aria-label="{{ i18n "bypass" }}">
        {{- $content := "content" }}
        {{- if not .IsPage }}
            {{- $content = "list-posts" }}
        {{- end }}
        <a id="to-content" href="{{ printf "#%s" $content }}" aria-label="{{ i18n "toContent" }}">
            <span>{{ i18n "toContent" }}</span>
            <kbd class="key" aria-hidden="true">c</kbd>
            <span class="screening" aria-hidden="true"></span>
        </a>
    </nav>
    {{/*

        site banner  */}}
    {{- $logoMark := site.Params.logo.logoMark }}
    {{- $logoType := site.Params.logo.logoType }}
    {{- $siteTitle := or site.Title site.Params.Title }}
    {{- if or $logoType $logoMark }}
        <a id="logo" href="{{ absLangURL "" }}" aria-label="{{ $siteTitle }}" aria-description="{{ i18n "home" }}">
            {{- with site.Params.logo.logoMarkDark }}
                <img id="logomark--dark" src="{{ . }}" alt="{{ $siteTitle }}" />
            {{- end }}
            {{- with $logoMark }}
                <img id="logomark" src="{{ . }}" alt="{{ $siteTitle }}" />
            {{- end }}
            {{- if or $logoType (not $logoMark) }}
                {{ partialCached "header/logotype.html" . }}
            {{- end }}
        </a>
    {{- end }}
    {{/*

        top nav */}}
    <details class="presentation" id="top-nav">
        <summary class="on-deck">
            <span class="t">{{ i18n "nav" }}</span>
            <span class="menu-icon" role="presentation"></span>
        </summary>
        <nav tabindex="-1" aria-label="{{ i18n "top-nav" }}">
            {{ partial "menu.html" (dict "menuID" "main" "open" "open" "page" .) }}
            {{ if site.Params.search.enable }}{{ partialCached "search.html" . }}{{ end }}
            {{ partial "menu.html" (dict "menuID" "more" "page" .) }}
            {{ partialCached "i18n.html" . }}
        </nav>
        <div id="top-nav-screen" class="screening js-cpn" role="presentation" aria-hidden="true"></div>
    </details>
</header>
{{- /*--------------------- end of header.html ---------------------*/}}

{{- define "partials/main/header.html" -}}
    {{ "<!-- main/header.html -->" | safeHTML }}
    {{- if not .IsHome }}
        <header class="pagewidth">
            {{- if not (or site.Params.BearMode site.Params.ZenMode) }}
                {{- if or (eq .Kind "term" ) .IsSection .IsPage }}
                    <menu class="srm">
                        {{- if .IsPage }}
                            {{- partialCached "nav/button.html" . -}}
                        {{- else }}
                            {{- with .OutputFormats.Get "rss" }}
                                <a id="rss-button" href="{{ .Permalink }}" title="{{ i18n "followRSS" }}" role="button" aria-label="{{ i18n "followRSS" }}">
                                    <span class="t srt" role="tooltip">{{ i18n "followRSS" }}</span>
                                </a>
                            {{- end }}
                        {{- end }}
                    </menu>
                {{- end }}
                {{- if not .IsPage }}
                    {{ partialCached "nav/button/back.html" . -}}
                {{- end }}
            {{- end }}
            {{ partial "nav.html" ( dict "navID" "breadcrumb" "page" . )}}
        </header>
    {{- end }}
{{- end }}

{{- define "partials/header/logotype.html" -}}
    {{ "<!-- logotype.html -->" | safeHTML }}
    {{- $siteTitle := or site.Title site.Params.Title }}
    {{- with $siteTitle -}}
        {{- $estimatedWidth := printf "%dpt" (mul (len . ) 28) -}}
        <svg id="logotype" xmlns="http://www.w3.org/2000/svg" version="1.1" width="{{ $estimatedWidth }}" aria-label="{{ . }}">
            <text id="logotype__text" y="19.5pt" x="0">{{ . }}</text>
        </svg>
    {{- end }}
{{- end }}

{{- define "partials/nav/button.html" -}}
    <button id="print-button" class="hide" onclick="window.print()" aria-label="{{ i18n "print" }}">
        <span class="t srt" role="tooltip">{{ i18n "print" }}</span>
    </button>
    <a id="navigatorShare" href="#share" role="button" aria-label="{{ i18n "share" }}">
        <span class="t srt" role="tooltip">{{ i18n "share" }}</span>
    </a>
    <button id="copyPermalink" {{ if ne hugo.Environment "development" }}class="hide"{{ end }} onclick="navigator.clipboard.writeText(window.location.href)" aria-label="{{ i18n "copy" }}">
        <span id="copy" class="t srt" role="tooltip">{{ i18n "copy" }}</span>
        <span id="isCopying" style="display: none;">{{ i18n "copying" }}</span>
        <span id="copyText" style="display: none;">{{ i18n "copy" }}</span>
    </button>
{{- end }}

{{- define "partials/nav/button/back.html" -}}
    <button id="back" class="hide" type="button" onclick="history.back();" aria-label="{{ i18n "back" }}">
        <span class="t srt" role="tooltip">{{ i18n "back" }}</span>
    </button>
{{- end }}